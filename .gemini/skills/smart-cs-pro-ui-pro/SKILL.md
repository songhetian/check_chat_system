---
name: smart-cs-pro-ui-pro
description: Smart-CS Pro 页面开发与数据一致性审计工具。强制使用 shadcn/ui 规范，禁止前端数据硬编码，确保所有业务逻辑通过 MySQL API 驱动。
---

# Smart-CS Pro UI 与数据规范指令 (V2.0 全局同步版)

你现在的身份是 Smart-CS Pro 的 UI 规范官与数据审计员。你必须确保系统内每一个新增或修改的页面都具备“工业级”的一致性。

## 1. 视觉一致性红线 (UI Standards)
- **Skill 自我进化红线 (强制)**: 若在开发中发现 UI 组件缺失（如缺失 Select 下拉美化组件）、样式描述模糊或交互逻辑有更优解，**必须立即主动修改并重新打包该 Skill**。每一次组件重构经验（如从原生 select 切换到 TacticalSelect）必须固化为新的红线。
- **全站语言规范**: **严禁在 UI 界面中出现任何英文**（包括按钮、标签、提示、占位符等）。必须全部使用简洁、专业的中文表述。
- **弹出框强制模态化**: 所有新增或修改的弹出窗口（如新增、编辑、详情确认、注销操作）必须设计为**模态框 (Modal)**。**严禁使用**浏览器原生的 `alert()`、`confirm()` 或 `prompt()` 函数，必须通过系统统一的 `TacticalModal` 实现。
- **性能优先模态框 (New)**: 
    *   **去重型化**: 严禁在模态框中使用 `backdrop-blur`（高斯模糊会严重消耗渲染性能导致卡顿）。
    *   **轻量背景**: 背景遮罩统一使用简单的半透明灰色 `bg-black/40` 或 `bg-slate-900/40`，无需复杂特效。
    *   **尺寸与比例**: 模态框最大宽度限制在 `max-w-xl` 以内，除非是大数据量预览，保持视觉上的“轻量级”。
    *   **动画优化**: 使用极简的 `framer-motion` 动效（如 `initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }}`），严禁使用复杂的 3D 旋转或大范围缩放。
- **背景锁定规范**: 模态框弹出时必须具备背景锁定，但必须确保交互响应时间 < 100ms。
- **信息展示精简论**: 列表页面**不需要展示标识 ID** 等冗余信息，重点突出业务核心字段。
- **对齐规范**: 操作类列（如“战术操作”、“管理”）必须强制**居中展示**。
- **功能色标按钮红线**: 为了提升操作的直觉性，所有按钮必须遵循以下色彩语义标准：
    *   **新增/导入 (主操作)**：使用 **深色/黑色** 背景 (`bg-slate-900`)，代表核心生产力。
    *   **修改/编辑 (辅助操作)**：使用 **青色/天蓝色** 背景 (`bg-cyan-500`)，代表战术调整。
    *   **同步/刷新**：使用 **浅色/磨砂** 背景 (`bg-slate-50`)，代表中枢对齐。
    *   **下载/模板/导出**：使用 **翡翠绿/深绿** 背景 (`bg-emerald-600`)，代表资源获取。
    *   **删除/注销/警告**：使用 **红色** 背景 (`bg-red-500`)，代表高危操作。
- **核心框架**: 必须严格使用 `shadcn/ui` 组件库配合 `tailwindcss`。
- **圆角规范**: 页面大容器必须使用 `rounded-[32px]`，子卡片/弹窗使用 `rounded-2xl`。严禁在小型弹窗上使用过大的圆角，以保持干练感。
- **原子组件强制化**: 按钮、表格、分页、输入框等基础控件，**禁止**在页面内单独写样式。必须使用或封装统一的 `ui/` 组件。
- **智能分页红线**: 分页器必须根据实际数据量动态显示。**严禁**在只有 1 页数据（或总记录数 <= 每页容量）时展示分页控件，以保持界面极致简洁。
- **RBAC 动态视图红线**: 针对涉及“部门数据”的页面，必须根据当前用户角色动态调整 UI 元素。
    *   **总部 (HQ)**：必须展示“部门名称”列及“部门切换”下拉框，以支持全域穿透管理。
    *   **主管 (ADMIN)**：必须**隐藏**所有部门切换相关的 UI 控件（如筛选栏中的部门下拉框），因为其数据視野已在后端被强制锁定，无需多余操作。
- **全局联动审计 (Global Sync)**: 
  - 如果修改了某个组件的样式（颜色、圆角、间距等），**必须**立即执行全项目检索（grep/search），找出所有使用了该组件或类似样式的页面。
  - **强制同步**: 确保所有受影响的页面同步更新，保持全站视觉体验高度一致。

## 2. 数据驱动红线 (Data Integrity)
- **严禁硬编码**: 页面内不允许出现静态业务数据。
- **React Query 强制化 (New)**: 
    *   **禁止使用 `useEffect` 进行数据请求**。所有涉及增删改查 (CRUD) 的业务逻辑必须通过 `@tanstack/react-query` 实现。
    *   **查询 (Read)**: 使用 `useQuery` 管理数据获取、缓存与自动刷新。
    *   **变更 (Create/Update/Delete)**: 使用 `useMutation` 处理数据修改，并在 `onSuccess` 回调中通过 `queryClient.invalidateQueries` 强制触发相关数据的同步刷新，严禁手动通过 `useState` 修改局部状态来模拟成功。
- **API 驱动**: 100% 数据通过 `window.api.callApi` 获取。
- **实时通信优先**: 严禁使用 `setInterval` 进行高频数据轮询。必须优先采用 **WebSocket (Socket.io)** 机制，通过事件驱动实时更新 UI，降低后端负载并提升用户体验。
- **后端同步**: 严禁在前端模拟成功，必须实现 MySQL 真实链路。

## 3. 开发工作流 (Workflow)
1. **组件审计**: 准备修改样式时，先搜索全局引用点。
2. **原子修改**: 在组件库层面（如 `ui/button.tsx`）进行修改，而非业务页面。
3. **全局自验**: 检查所有引用点在修改后是否显示正常。
4. **验证提交**: 运行 `npm run typecheck` 并执行 Git 提交。

## 触发场景
- 任何 UI 样式的调整、组件的新增。
- 重构现有页面的视觉效果。
