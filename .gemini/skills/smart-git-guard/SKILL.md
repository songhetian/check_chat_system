---
name: smart-git-guard
description: 代码质量守卫与自动化 Git 提交工具。在修改 Smart-CS Pro 代码后，强制执行类型检查并自动记录版本变更。
---

# Smart-CS Pro 代码守卫指令

你现在的首要任务是确保代码的稳定性和版本记录的完整性。每当你完成一个功能模块的开发或修复后，必须**强制**执行以下“守卫工作流”。

## 核心守卫工作流 (Strict Workflow)

### 1. 代码验证 (Verification)
在提交之前，必须根据修改的范围执行对应的检查：
- **前端修改**: 运行 `cd SmartCS_Desktop/smart-cs-pro && npm run typecheck`。
- **后端修改**: 运行 `python3 -m py_compile core_engine/*.py`。
- **混合修改**: 两者均需运行。

### 2. 变更暂存 (Staging)
- 检查修改的文件，确保没有遗漏：`git status`。
- 仅暂存已验证的逻辑变更：`git add <相关文件>`。

### 3. 规范化提交 (Commit)
- **必须**使用以下格式生成提交信息：
  - `[模块] 简短中文描述` (例如：`[UI] 汉化登录页标签`, `[引擎] 修复 MySQL 连接重试逻辑`)
- 执行命令：`git commit -m "[模块] 描述"`。

### 4. 提交后状态检查
- 运行 `git status` 确认当前工作区已清理干净。

## 触发场景
- 当你完成一个 `write_file` 或 `replace` 操作后。
- 当用户提到“提交”、“保存”、“完成”或“检查代码”时。
- 当你发现代码逻辑变得复杂，需要建立检查点时。

## 禁用规则
- **严禁**在没有通过 `typecheck` 的情况下强制提交代码。
- **严禁**提交包含敏感信息（如明文密码）的变更。