# 📦 Smart-CS 打包指南 (Windows 端)

本指南介绍如何将 Python 源代码转化为用户可直接安装的 `.exe` 安装包。

## 1. 第一阶段：源码转可执行文件 (PyInstaller)

这一步是将代码打包成零散的 `.exe` 零件，放在 `dist/` 文件夹中。

### 操作步骤：
1.  **激活虚拟环境**:
    ```bash
    cd SmartCS_Desktop
    ..\venv\Scripts\activate
    ```
2.  **执行构建脚本**:
    ```bash
    python build.py
    ```
    *   **脚本逻辑**: 该脚本会自动调用 PyInstaller，将 `Admin`、`Agent`、`Guard` 和 `Server` 分别打包。
    *   **注意**: 此时 `Agent` 和 `Guard` 已被设置为 `--noconsole`（无黑色窗口运行模式）。

3.  **检查结果**:
    确认 `SmartCS_Desktop/dist/` 目录下生成了以下文件：
    *   `SmartCS_Admin.exe`
    *   `SmartCS_Agent.exe`
    *   `SmartCS_Guard.exe`
    *   `SmartCS_Server.exe`

---

## 2. 第二阶段：制作安装包 (Inno Setup)

这一步是将 `dist/` 里的所有零件和 `assets/` 资源压成一个唯一的安装程序。

### 操作步骤：
1.  **安装 Inno Setup**: 
    前往 [Inno Setup 官网](https://jrsoftware.org/) 下载并安装编译器。
2.  **打开工程文件**:
    在 Inno Setup 软件中，打开项目根目录下的 `SmartCS_Desktop/setup.iss`。
3.  **编译 (Compile)**:
    点击工具栏上的 **"Build" -> "Compile"**（快捷键 F9）。
4.  **获取安装包**:
    编译完成后，在 `SmartCS_Desktop/Output/` 目录下会生成：
    *   `SmartCS_Setup_Pro.exe` —— **这就是发给客户的最终安装包。**

---

## ⚠️ 打包前必看
*   **修改 IP**: 在打包前，请确保 `server_config.json` 中的 `server_url` 不是 `localhost`，而是你**真实的服务器 IP**。
*   **权限**: `Agent` 涉及到键盘监听，打包后的 EXE 在运行时，Windows 可能会有防火墙或杀毒软件提示，请选择“允许”或添加信任。
