<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { background: #f0f2f5; font-family: sans-serif; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .wizard-card { width: 500px; background: white; border-radius: 12px; padding: 40px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .step-indicator { display: flex; margin-bottom: 30px; }
        .step { flex: 1; height: 4px; background: #e8e8e8; margin: 0 4px; border-radius: 2px; }
        .step.active { background: #1890ff; }
        h2 { margin-top: 0; color: #1d1d1f; }
        p { color: #86868b; font-size: 14px; line-height: 1.6; }
        .form-item { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-size: 13px; font-weight: bold; }
        input { width: 100%; padding: 10px; border: 1px solid #d9d9d9; border-radius: 4px; box-sizing: border-box; }
        .footer { display: flex; justify-content: space-between; margin-top: 30px; }
        button { padding: 10px 20px; border-radius: 4px; cursor: pointer; border: 1px solid #d9d9d9; }
        .btn-primary { background: #1890ff; color: white; border: none; }
    </style>
</head>
<body>
    <div class="wizard-card">
        <div class="step-indicator">
            <div class="step active"></div>
            <div class="step"></div>
            <div class="step"></div>
        </div>
        <h2>系统维护与配置</h2>
        <p>欢迎使用 Smart-CS。在此您可以管理数据库连接或执行系统级维护。</p>
        
        <div class="form-item">
            <label>MySQL 连接配置</label>
            <input type="text" placeholder="127.0.0.1 (本地) 或 远程 IP">
        </div>

        <div style="margin-top: 30px; padding: 15px; background: #fff1f0; border-radius: 8px; border: 1px solid #ffa39e;">
            <label style="color: #cf1322;">高级维护选项</label>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button style="flex: 1; font-size: 12px; background: white;">导出所有日志 (Excel)</button>
                <button style="flex: 1; font-size: 12px; background: white;">清理30天前历史数据</button>
            </div>
        </div>

        <div class="footer">
            <button onclick="testConnection()">检测连接</button>
            <button class="btn-primary" onclick="saveConfig()">保存配置并启动</button>
        </div>
    </div>
    <script>
        async function testConnection() {
            const host = document.querySelector('input').value;
            alert('正在检测与 ' + (host || '默认地址') + ' 的连接...');
            try {
                const res = await fetch('/health');
                const data = await res.json();
                if (data.status === 'healthy') {
                    alert('连接成功！数据库状态: ' + data.dbConnection);
                } else {
                    alert('服务响应异常');
                }
            } catch (e) {
                alert('无法连接到服务器，请检查后端是否启动');
            }
        }

        function saveConfig() {
            alert('配置已保存 (演示模式)');
            console.log('Save triggered');
        }
    </script>
</body>
</html>
